<!DOCTYPE html>
<html>

<head>
  <title>实时画面叠加实时检测结果</title>
  <meta charset="utf-8">

  <link rel="stylesheet" href="https://unpkg.com/layui@2.8.18/dist/css/layui.css">
  <link href="live.css" rel="stylesheet">
  <script>
    let ZQLGLOBAL = {
      serverIp: '192.168.1.170',// 修改成您的盒子的IP地址      
      getSources: `:9092/ks/source`,
      subscribe: `:9092/stream/live/subscribe`,
      resultTopic: 'ks/video_detection', //实时检测结果
      streamInfoTopic: 'ks/stream_local',// 视频流状态变更信息，可监测流状态、分辨率变化
      media_http_api: 1985, // 画面播放
      websocket: 8083, // mqtt消息
      mqttAuth:['work','Bjhmdys@202010'], // mqtt账号密码

      // 登录盒子平台（“系统设置”->“运维系统”->“安全设置”）查看Access Key ID和Access Key Secret
      accessKey: '69032aad1271cb25e1fd1e99', // 修改成您盒子账号的accessKey
      accessSecret: '9b200e3a-d8f4-47d8-8eb0-6ff89e81f80c',  // 修改成您盒子账号的accessSecret
      token: '',
      getToken: ':9092/ks/system/user/token',
      getTime: ':9092/ks/system/time',
    };

    let ZQL_videosInfos = { 0: null, 1: null, 2: null, 3: null };
    let ZQL_playingSource = {
      0: null, 1: null, 2: null, 3: null,
      videoNum: 4,
      curposition: -1
    };
    let ZQL_sources = {};
  </script>
  <script type="text/javascript" src="public/crypto-js.js"></script>
  <script type="text/javascript" src="public/jquery-1.10.2.min.js"></script>
  <script type="text/javascript" src="public/mqtt.min.js"></script>
  <script type="text/javascript" src="public/ZLMRTCClient.js"></script>
  <script src="https://unpkg.com/layui@2.8.18/dist/layui.js"></script>
</head>

<body>
  <div class="main-container">
    <div id="video-container" class="one-video">
      <div class="video-box">
        <div class="title-container" id="video-title1"></div>
        <video ref="video" muted id="video1" class="video-js" autoplay="autoplay" preload="auto"></video>
        <canvas class="canvas-shuju" id="canvas1"></canvas>
      </div>
    </div>
    <div class="right-container">
      <!-- <div class="btn-container">
        <i class="z-icon-onevideo" id="icon-oneviveo"></i>
        <i class="z-icon-fourvideo" id="icon-fourviveo"></i>
      </div> -->
      <div id="ZQL_source_tree"></div>
    </div>
  </div>

  <script type="text/javascript" src="live.js"></script>
  <script>
    ZQL_apis.getToken().then(res => {
      if (res.error_code == 0) {
        ZQLGLOBAL.token = res.data;
        init();
      }
    })

  </script>
</body>

</html>